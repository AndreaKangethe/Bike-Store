{% extends "store/base.html" %}
{% load widget_tweaks %}

{% block content %}
  <div class="container">
    <h2 class="text-center my-4">Update Profile</h2>

    <form method="POST" enctype="multipart/form-data" class="card p-4 shadow-sm">
      {% csrf_token %}

      {% if user_form.errors or profile_form.errors %}
        <div class="alert alert-danger">
          <strong>There were some errors with your form:</strong>
          <ul>
            {% for field in user_form %}
              {% for error in field.errors %}
                <li>{{ error }}</li>
              {% endfor %}
            {% endfor %}
            {% for field in profile_form %}
              {% for error in field.errors %}
                <li>{{ error }}</li>
              {% endfor %}
            {% endfor %}
          </ul>
        </div>
      {% endif %}

      <div class="mb-3">
        <label for="{{ user_form.username.id_for_label }}" class="form-label">Username:</label>
        {{ user_form.username|attr:"class:form-control" }}
      </div>

      <div class="mb-3">
        <label for="{{ user_form.email.id_for_label }}" class="form-label">Email:</label>
        {{ user_form.email|attr:"class:form-control" }}
      </div>

      <h3 class="mt-4">Profile Details</h3>

      <div class="mb-3">
        <label for="{{ profile_form.bio.id_for_label }}" class="form-label">Bio:</label>
        {# --- MODIFIED LINE --- #}
        {# Added rows:3 to make the textarea shorter (adjust '3' as needed) #}
        {{ profile_form.bio|attr:"class:form-control rows:3" }}
        {# --- END MODIFIED LINE --- #}
      </div>

      <div class="mb-3">
        <label for="{{ profile_form.profile_picture.id_for_label }}" class="form-label">Profile Picture:</label>
        {{ profile_form.profile_picture|attr:"class:form-control" }}
      </div>

      <button type="submit" class="btn btn-primary w-100">Save Changes</button>
    </form>
  </div>
{% endblock %}